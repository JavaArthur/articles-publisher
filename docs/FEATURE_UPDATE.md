# 🎉 Hexo Publisher v2.1 功能更新

## ✅ 已解决的问题

### 1. 🔧 文件名编码问题 ✅
- **问题**: 生成的博客文件名包含乱码
- **解决方案**: 
  - 添加了文件名选择功能
  - 提供三种文件名选项：
    - 使用原文件名（清理特殊字符）
    - 自定义文件名（用户输入）
    - 使用标题作为文件名（自动提取）
  - 智能清理特殊字符和中文

### 2. 📏 预览区域优化 ✅
- **问题**: 内容预览长度太短
- **解决方案**:
  - 预览区域最小高度从600px增加到750px
  - 最大高度从600px增加到800px
  - 整体页面最小高度从800px增加到900px

### 3. 👁️ Front Matter 隐藏功能 ✅
- **问题**: Markdown预览显示Front Matter影响阅读
- **解决方案**:
  - 添加"隐藏Front Matter"切换开关
  - 默认隐藏Front Matter内容
  - 支持动态切换显示/隐藏

### 4. ⚙️ 博客配置显示 ✅
- **问题**: 用户不知道当前博客文件夹配置
- **解决方案**:
  - 页面顶部显示当前配置信息
  - 实时显示博客目录和图片目录路径
  - 从服务器API动态加载配置

## 🎨 新增功能

### 📝 智能文件名处理
```
📄 文件名设置
○ 使用原文件名
○ 自定义文件名 [输入框]
○ 使用标题作为文件名 (Qwen3-Coder：让编程变得更简单的AI助手)
```

### 👁️ 预览模式增强
```
📝 内容预览
☑️ 隐藏Front Matter    [👁️ 预览] [📄 原文]
```

### ⚙️ 配置信息面板
```
⚙️ 当前配置
📁 博客目录: /Users/user/blog/source/_posts
🖼️ 图片目录: /Users/user/blog/source/images
```

## 🔧 技术改进

### 前端改进
- **文件名验证**: 实时验证自定义文件名合法性
- **标题提取**: 自动从markdown内容提取标题
- **配置加载**: 启动时从API加载配置信息
- **Front Matter处理**: 智能识别和隐藏Front Matter

### 后端改进
- **配置API**: 新增`/api/config`接口返回配置信息
- **文件名处理**: 支持接收自定义目标文件名
- **文件保存**: 使用用户指定的文件名保存
- **路径清理**: 改进的文件名清理算法

## 🎯 使用指南

### 1. 文件名选择
1. 上传markdown文件后会自动显示文件名选项
2. **使用原文件名**: 保持原文件名但清理特殊字符
3. **自定义文件名**: 用户自己输入文件名（不含扩展名）
4. **使用标题**: 自动提取markdown中的第一个标题作为文件名

### 2. Front Matter 切换
- 预览区域右上角的复选框控制是否显示Front Matter
- 默认隐藏以获得更好的阅读体验
- 可随时切换查看完整内容

### 3. 配置信息
- 页面顶部自动显示当前博客和图片目录
- 如果显示"加载中..."说明服务器连接问题
- 配置来自`config.json`文件

## 🎬 演示效果

### 文件名选择
```
原文件名: "AI助手直接操作你的知识库：MCP与Obsidian完美集成7步教程_WeChat.md"
↓ 处理后
选项1(原文件名): "AI助手直接操作你的知识库_MCP与Obsidian完美集成7步教程_WeChat.md"  
选项2(自定义): "mcp-obsidian-guide.md"
选项3(标题): "AI助手直接操作你的知识库：MCP与Obsidian完美集成7步教程.md"
```

### Front Matter 隐藏
```
隐藏前:
---
title: 🤖 标题
date: 2025-07-17 16:30:00
---
# 正文内容

隐藏后:
# 正文内容
```

## 🚀 启动服务

```bash
npm run server
```

访问 `http://localhost:3000` 体验全新功能！

## 🎯 下一步计划

- [ ] 添加批量上传功能
- [ ] 支持文件夹目录选择
- [ ] 集成拼音转换优化中文文件名
- [ ] 添加文章标签和分类编辑器
- [ ] 支持更多Front Matter字段编辑